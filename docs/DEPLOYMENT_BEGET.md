# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ AI Travel Agent –Ω–∞ VPS Beget

## üìä –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è VPS:
- **CPU**: 1 vCPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 vCPU)
- **RAM**: 1 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 GB)
- **–î–∏—Å–∫**: 10 GB SSD
- **–û–°**: Ubuntu 20.04+ –∏–ª–∏ Debian 10+

### –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:

#### –í —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å—Ç–æ—è:
- **CPU**: 1-3%
- **RAM**: ~150-200 MB (Node.js + Redis)
- **–°–µ—Ç—å**: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (keep-alive –¥–ª—è Telegram)

#### –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ (10-20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
- **CPU**: 10-20%
- **RAM**: ~300-400 MB
- **–°–µ—Ç—å**: ~1-5 Mbps (API –∑–∞–ø—Ä–æ—Å—ã)

#### –ü—Ä–∏ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ (50+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
- **CPU**: 30-50%
- **RAM**: ~500-700 MB
- **–°–µ—Ç—å**: ~5-10 Mbps

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

#### 1. **Telegram Bot**
- **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: 100-200 (–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º VPS)
- **–°–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥—É**: ~50-100
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: Telegram API limits (30 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ –Ω–∞ —á–∞—Ç)

#### 2. **Web API (Mini App)**
- **RPS (–∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫)**: ~100-200 –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º VPS
- **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**: ~500-1000
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 50-200ms (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)

#### 3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)**
- **–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è**: –¥–æ 100 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Neon)
- **–ó–∞–ø—Ä–æ—Å—ã/—Å–µ–∫**: ~500-1000
- **–†–∞–∑–º–µ—Ä –ë–î**: –Ω–∞—á–∞–ª—å–Ω—ã–π ~10MB, —Ä–æ—Å—Ç ~1MB/1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 4. **Redis –∫–µ—à**
- **–û–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫**: ~10,000+
- **–ü–∞–º—è—Ç—å**: ~50-100MB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **TTL –∫–µ—à–∞**: 5-60 –º–∏–Ω—É—Ç

### –£–∑–∫–∏–µ –º–µ—Å—Ç–∞:
1. **API Level.Travel**: –ª–∏–º–∏—Ç—ã –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
2. **OpenRouter API**: –∫–≤–æ—Ç—ã –∏ —Ç–∞—Ä–∏—Ñ—ã
3. **–°–µ—Ç—å VPS**: –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
4. **CPU**: –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Beget

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ VPS

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt install -y git curl build-essential

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20.x
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
sudo npm install -g pm2

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
sudo apt install -y nginx
sudo systemctl enable nginx

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
sudo apt install -y redis-server
sudo systemctl enable redis-server
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo mkdir -p /var/www/travel-bot
sudo chown $USER:$USER /var/www/travel-bot

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
cd /var/www/travel-bot
git clone [–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π] .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ .env
cp .env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ–º Neon)

–¢–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Neon (–≤–Ω–µ—à–Ω—è—è –ë–î), –Ω–∞ VPS PostgreSQL –Ω–µ –Ω—É–∂–µ–Ω. –ü—Ä–æ—Å—Ç–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DATABASE_URL` –≤ `.env` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à—É –ë–î –≤ Neon.

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PM2

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `ecosystem.config.js`:

```javascript
module.exports = {
  apps: [{
    name: 'travel-bot',
    script: 'npm',
    args: 'start',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '500M',
    error_file: 'logs/err.log',
    out_file: 'logs/out.log',
    log_file: 'logs/combined.log',
    time: true
  }]
};
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `/etc/nginx/sites-available/travel-bot`:

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è WebSocket (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
    location /ws {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
sudo ln -s /etc/nginx/sites-available/travel-bot /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### 6. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
npm run db:migrate

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
pm2 start ecosystem.config.js

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
pm2 save
pm2 startup
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è VPS

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ Node.js

–í `ecosystem.config.js`:

```javascript
env: {
  NODE_ENV: 'production',
  NODE_OPTIONS: '--max-old-space-size=512'
}
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏

–í `/etc/redis/redis.conf`:

```conf
maxmemory 100mb
maxmemory-policy allkeys-lru
save ""  # –û—Ç–∫–ª—é—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫ –µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ
```

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤:

```bash
sudo nano /etc/logrotate.d/travel-bot
```

```
/var/www/travel-bot/logs/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 0640 www-data www-data
    sharedscripts
    postrotate
        pm2 reloadLogs
    endscript
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. PM2 –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 monit

# –õ–æ–≥–∏
pm2 logs
```

### 2. –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ htop
sudo apt install htop

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
htop
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2 Plus –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç:

```bash
#!/bin/bash
# check-health.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PM2
if ! pm2 list | grep -q "travel-bot.*online"; then
    echo "Bot is down!" | mail -s "Travel Bot Alert" your-email@example.com
    pm2 restart travel-bot
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
MEM_USAGE=$(free | grep Mem | awk '{print ($3/$2) * 100.0}')
if (( $(echo "$MEM_USAGE > 80" | bc -l) )); then
    echo "High memory usage: $MEM_USAGE%" | mail -s "Memory Alert" your-email@example.com
fi
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ VPS (RAM, CPU)
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤

2. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö VPS —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –∏ API –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ TTL –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
   - CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

4. **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á**
   - Bull –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—Ä–æ—á–Ω—ã—Ö –∑–∞–¥–∞—á

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ:

| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | VPS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |
|--------------|------------------|-------------|
| < 100 | 1 CPU, 1GB RAM | –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
| 100-500 | 2 CPU, 2GB RAM | Redis –∫–µ—à, –∏–Ω–¥–µ–∫—Å—ã –ë–î |
| 500-1000 | 4 CPU, 4GB RAM | CDN, –æ—á–µ—Ä–µ–¥–∏, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î |
| > 1000 | –ö–ª–∞—Å—Ç–µ—Ä | –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, Kubernetes |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ VPS

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall**:
```bash
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

2. **Fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞**:
```bash
sudo apt install fail2ban
```

3. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**:
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
sudo apt install unattended-upgrades
sudo dpkg-reconfigure unattended-upgrades
```

4. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –ë–î
0 3 * * * pg_dump $DATABASE_URL | gzip > /backup/db-$(date +\%Y\%m\%d).sql.gz
```

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–∞—à –±–æ—Ç –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è VPS –Ω–∞ Beget! –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Å–æ—Ç–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º —Ç–∞—Ä–∏—Ñ–µ. –ù–∞—á–Ω–∏—Ç–µ —Å –Ω–µ–±–æ–ª—å—à–æ–≥–æ VPS –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ—Å—å –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏.